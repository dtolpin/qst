$Id: changes.txt,v 1.20 2005/09/12 17:53:48 dvd Exp $

вс сен 11 02:50:47 MVT 2005
	Подсчет влиятельных вопросов, если встречает сработавший синдром,
	то вместо него включает несработавшие симтпомы этого синдрома. 
	Получается интуитивно.

ср сен  7 01:29:44 MVT 2005
	Реализовал активный диалог. Ссылки на три самых влиятельных вопроса 
	высвечиваются под текстом заключения. Веса вопросов вписаны в title ссылки
	(и содержащего ее параграфа), так что для отладки на них можно взглянуть.


	Алгоритм подсчета влиятельности вопросов

	   Всем несработавшим переменным приписываем 1. Проходимся по верхнему ранку,
	и для всех несработавших синдромов прибавляем влияние к симптомам (вес/число_несраб).
	Спускаемся на ряд, и повторяем. Так, пока не дойдем донизу. Выбираем hints-limit
	вопросов вопросов с видимыми секциями, и делаем их видимыми, сохраняя
	порядок следования. 
	   
	Cтруктуры данных:
		(defvar weightab 
			(let ((wt (make-hash-table)))
				(maphash
					#'(lambda (k v)
						(when (gethash k vartab)
							(setf (gethash k wt) 1)))
					vartab)
				wt))
		(defun ranks '((...) ...))
		(defun inftab (make-hash-table))

	Все это на ECMAScript.
	
вс сен  4 11:54:32 MVT 2005
	TODO: в список подсказок включаю только видимые элементы. 
		Проверяю видимые элементы по размеру области на экране,
		почти все браузеры выдают 0 для неотображенных. Выбранную секцию
		обвожу яркой красной рамкой.
	Возбудитель интеллекта.

сб сен  3 00:25:33 MVT 2005
	Починил html-writer, чтобы не экранировал символы внутри JavaScript.

сб авг 20 23:39:23 MVT 2005
	TODO: Веб-формы для генерации
	TODO: Активный диалог: список вопросов с контекстом, на которые нужно ответить,
		чтобы получить большую информацию Похоже на PageRank. Нужно упорядочить
		неответченные симптомы по тому, насколько они приблизят к ответу, 
		и сколько синдромов. 
	
		Надо понять, как обсчитывать взаимосвязанные синдромы. 

Tue May 10 15:30:57 MVT 2005
	Добавил карту синдромов. В title у синдрома/симптома - его значение, если медленно
	наехать мышкой, то покажет в балоне. Если кликнуть на синдром/симптом, то то, 
	от чего он зависит, покрасится в красный цвет, то, что зависит от него - в синий,
	а сам он - в желтый.

Sun Apr  3 17:54:04 MVT 2005
	Реализовал новый синтаксис, переписал seleng.cnc на нем. Добавил генератор
	диаграммы синдромной сети в graphviz, это оказалось десять строк, как обычно.
	Сделал main, скрипты для запуска clisp и cmucl. Убрал анафорическую lineno,
	заменив на (defvar *lineno*).

Fri Apr  1 02:13:08 AMST 2005
	Сделал, чтобы работало с IE. Виртуальная машина пригодна и для lesy,
	и для nova. Сделал тесты и для леси, и для новы.

Mon Mar 28 06:49:07 MVT 2005
	Автоматическое разворачивание работает. Заключения тоже генерируются,
	надо бы тесты сделать. Виртуальная машина на джаваскрипте.

Sat Mar 26 02:01:45 AMT 2005
	Начал делать автоматическое разворачивание. Для разворачивания нужно
	изображать нажатие на кнопку - смотреть на ее состояние, и если оно -
	неправильное, вызывать flipTail.
	При отложенном управлении первый вопрос показывать не надо — не
	показываю.

Thu Mar  3 00:30:21 GST 2005
	Добавил обработку ссылок в парсере (&). Раньше сделал примерное
	свертывание на Javascript (вручную). Задача его автоматизирования
	будет интересной.

Sun Feb 27 03:34:09 GST 2005
	Генерирует HTML, в первом приближении. Теперь надо сделать парсер для
	условий управления и свертывание на Javascript. 

Fri Feb 25 02:23:45 GST 2005
	Работает определение таблиц. Лисп с поддержкой юникода должен работать 
	с Юникодными исходниками, лисп без - с безюникодными. Это немножко 
	неудобно, но придется с этим жить. Теперь осталось сделать условия
	обхода,	а потом - правильный JavaScript. И можно показывать.

Fri Jan 28 13:55:21 GST 2005
	Добавил структуры для таблиц. Запоминаю смещение шаблона в строке, 
	чтобы вычленять таблицы.

Mon Nov 29 01:44:50 AMT 2004
	Вопросы буду линковать, запоминая замыкания для каждого, и потом
	вызывая, когда дойду доверху. Может быть.

Sat Nov 27 23:33:34 AMT 2004
	Парсер дышит. В разделах, которые сами собой управляют, надо 
	просто генерировать подраздел с уникальным именем и без заголовка,
	перенося туда условие обхода. Таким образом, вместо
	
	<section guard="x" title="y">
		<head>q1</head>
		<body>q2...qn
		</body>
	</section>
	
	<section title="y">
		q1
		<section guard="x">
			q2...qn
		</section>
	</section>
	