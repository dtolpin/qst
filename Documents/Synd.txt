Операторы языка Synd 

Оператор безусловного вывода текста на экран:

   Текст в круглых скобках полностью выводится на экран.

Пример:
   В строке управляющего файла имеется запись:
(...Ттттттттттттт..ттттттттттт.)
   В выходном тексте будет напечатано:
...Ттттттттттттт..ттттттттттт.


Оператор условного вывода текста на экран:

   Текст в круглых скобках полностью выводится на экран, если значение переменной, предшествующей выводу этого текста, попадает в числовой интервал, указанный перед скобкой, начинающей выводимый текст. Такой переменной может быть краткое имя одного из вопросов опросника или имя синдрома, образованного из имен вопросов.

Пример:
   В управляющем файле имеется запись:
Хххх
 1 4 (...Тттттттттттттт..ттттттттттт.)
 3 6 (---Мммммммммммммм--ммммммммммм-)

   Если в результате диалога с пользователем к моменту формирования текста величина переменной Хххх окажется в пределах от 1 до 2, то в выходном тексте появится запись:
...Тттттттттттттт..ттттттттттт.

   Если величина переменной окажется в интервале от 5 до 6, то в выходном тексте появится запись:
---Мммммммммммммм--ммммммммммм-

   Если же величина переменной будет лежать в интервале от 3 до 4, то в выходном тексте появится запись:
...Тттттттттттттт..ттттттттттт.---Мммммммммммммм--ммммммммммм-

   В противном случае этот фрагмент текста управляющего файла в выходном тексте будет отсутствовать. 



Оператор условного вывода текста на экран с подстановкой переменной

   Если в выводимом с помощью оператора условного вывода фрагменте текста присутствует знак `звездочка` (*) или одиночная группа `звездочек`, то при выводе этого фрагмента на экран вместо `звездочек` будет подставлена величина переменной, определенная к этому моменту диалогом. Безразлично, является эта переменная числовой или текстовой.

Пример 1:
   В управляющем файле имеется запись:
Хххх
 1 2 (...Тттттттттттттт.**.ттттттттттт.)

   Если в результате диалога с пользователем к моменту формирования текста величина переменной Хххх окажется в пределах от 1 до 2, например - 2, то в выходном тексте появится запись:
...Тттттттттттттт.2.ттттттттттт.

   В противном случае этот фрагмент текста управляющего файла в выходном тексте будет отсутствовать. 

Пример 2:
   В управляющем файле имеется запись:
Хххх
  (...Тттттттттттттт.**.ттттттттттт.)

   Если в результате диалога с пользователем к моменту формирования текста величина переменной Хххх окажется, например, равной Мммммм, то в выходном тексте появится запись: 
...Тттттттттттттт.Мммммм.ттттттттттт.



Синдром или Симптомокомплекс

   Оператор этого типа в момент его определения имеет имя и следующее за ним в фигурных скобках перечисление имен переменных и условий их рассмотрения в виде:
Хххх
{ a b Mmmm
  c d Nnnn
   ...
  p q Kkkk },
где a b, c d, ..., p q - границы интервалов, при попадании в которые величин ответов на вопросы с именами Mmmm, Nnnn и Kkkk, считается, что выполнены соответствующие симптомы.

   Величиной синдрома в неком состоянии диалога считается число выполненных в нем симптомов.

   После того, как синдром однажды определен, в дальнейшем он может рассматриваться как обычный вопрос, что позволяет использовать его в конструкциях типа рассмотренных выше, а также - в качестве симптома других синдромов для построения сетей пороговых функций.

   При трансляции управляющего файла специально проверяется уникальность создаваемых синдромов.



Операторы условного перехода

   Оператор условного перехода вперед имеет вид: a b [jump(<name>)]. Как и в рассмотренных ранее операторах величины a и b задают интервал, попадание в который переменной, определенной непосредственно перед данным оператором, вызывает его исполнение. Исполнение опуратора jump приводит к передаче управления (перескоку вперед /вниз/) первому по порядку после данного jump'а оператору с именем <name>. 

   Если условия исполнения скачка отсутствуют, оператор jump будет выпролняться всегда, когда к нему будет обращение при интерпретации программы синтеза.

   Примечание: все вычислимые операторы, через котрые производится такой скачок, не будут вычислены, и последующее обращение к ним в таком случае может привести к аномальным явлениям.

   Оператор условного перехода назад имеет вид: a b [back(<name>)]. Как и в рассмотренных ранее операторах величины a и b задают интервал, попадание в который переменной, определенной непосредственно перед данным оператором, вызывает его исполнение. Исполнение оператора back приводит к передаче управления (перескоку вперед /вниз/) первому по порядку перед данным back'ом оператору с именем <name>. 

   Если условия исполнения скачка отсутствуют, оператор back будет выпролняться всегда, когда к нему будет обращение при интерпретации программы синтеза.

   Примечание: оператор back может быть использован для организации циклов.



Арифметические функции

   В языке SYND используются четыре арифметических функции: add, dif, mul, div для сложения, вычитания, умножения и деления соответственно.

   Общая запись этих функций в программе синтеза: [fun(var,op1,op2)], где fun - конкретно используемая функция из указанных четырех, op1 и op2 - имена переменных, над которыми выполняется данная функция, а var - новая переменная, в которую будет занесен результат вычисления fun.
   Операнды op1 и op2 должны быть определены до вычисления функции от них, в противном случае транслятором будет зафиксирована ошибка. В качестве операндов также могут использоваться и константы.



Правила применения операторов языка Synd

   Правило 1. Генерация текста осуществляется в порядке просмотра управляющего файла от его начала.

   Правило 2. Каждый следующий выводимый на экран отрезок текста из управляющего файла пишется в продолжение строки, образованной предшествующим текстом. Если при этом длина строки превосходит 78 символов, то осуществляется перенос последнего слова в начало следующей строки.

   Правило 3. Если перед открывающей скобкой стоит знак `плюс` (+), то вывод текста, находящегося за этой скобкой, начинается с новой строки.

   Правило 4. Если знак (+) стоит перед именем переменной, то все тексты, относящиеся к этой переменной, (в случае их выведения на экран) будут выводиться с новой строки каждый.

   Правило 5. Открывающая и закрывающая скобки должны находиться в одной строке.

   Правило 6. Если в строке перед открывающей скобкой не указаны условия вывода текста на экран, то этот текст выводится всегда.

   Правило 7. Ограничения на вывод текста в скобках указываются в виде числового интервала: текст выводится при попадании величины ответа на вопрос, за именем которого следует этот текст, в указанный интервал.

   Правило 8. Имя признака и соответствующий ему текст размещаются в различных строках.

   Правило 9. Числа, определяющие условия вывода текста отделяются друг от друга и от выводимого текста пробелами. 

   Правило 10. Число строк текста после любого признака не ограничено.

   Правило 11. Условия вывода различных строк, следующих за неким именем вопроса, могут быть собственными в каждой из строк.

   Правило 12. Если среди символов выводимого текста находится символ `звездочка` (*) или группа из нескольких таких символов (но только одна!), то в это место выводимого текста будет подставлен ответ на вопрос или величина синдрома, имя которых предшествует этому тексту. 

   Правило 13. При подстановке значения переменной в выводимый фрагмент текста необходимо, чтобы максимальная длина получаемой при этом строки на превосходила 78 символов.

   Правило 14. Если выводимый текст в скобках состоит всего лишь из одного символа, то этим символом будет заменен последний символ ранее выведенного текста, - это правило обычно используется для расстановки знаков препинания.

   Правило 15. После знака (|) в любой строке управляющего файла может размещаться произвольный комментарий.


Т_1
 (   Номер карты - ** .)
Т_2
 ( Ф.И.О. - ** .)
+Ztm_1
  1 1 (   Затемнение тотальное.)
  2 2 (   Затемнение субтотальное.)
  3 3 (   Ограниченное затемнение.)
  4 4 (   Очаг.)
  5 5 (   Фокус.)
  6 6 (   Кольцевидная тень.)
Ztm_2
  1 1 ( Тень единичная.)
  2 2 ( Тень, типичная для группы теней.)
  3 3 ( Тень, типичная для диссеминации.)
Ztm_3
  1 2 ( Тень локализована)
  1 1 ( в правом легком )
  2 2 ( в левом легком )
ver
{ 1 1 Ztm_4/1
  1 1 Ztm_4/2
  1 1 Ztm_4/3 }
 1 3 ( в верхних отделах, зоны -)
Ztm_4/1
  1 1 ( кортикальная,)
Ztm_4/2
  1 1 ( интермедиальная,)
Ztm_4/3
  1 1 ( прикорневая,)
 (;)
sro
{ 1 1 Ztm_5/1
  1 1 Ztm_5/2
  1 1 Ztm_5/3 }
 1 3 ( в средних отделах, зоны -)
Ztm_5/1
  1 1 ( кортикальная,)
Ztm_5/2
  1 1 ( интермедиальная,)
Ztm_5/3
  1 1 ( прикорневая,)
 (;)
nio
{ 1 1 Ztm_6/1
  1 1 Ztm_6/2
  1 1 Ztm_6/3 }
 1 3 ( в нижних отделах, зоны -)
Ztm_6/1
  1 1 ( кортикальная,)
Ztm_6/2
  1 1 ( интермедиальная,)
Ztm_6/3
  1 1 ( прикорневая,)
 (.)
bok
{ 1 1 Ztm_7
  1 1 Ztm_8
  1 1 Ztm_9 }
 1 3 ( На боковом снимке тень расположена в отделах -)
Ztm_7
   1 1 ( передних,)
Ztm_8
  1 1 ( средних,)
Ztm_9
  1 1 ( задних,)
bok
  1 3 (.)
Ztm_10
  1 7 ( Форма тени)
  1 1 ( округлая.)
  2 2 ( неправильно-округлая.)
  3 3 ( овальная.)
  4 4 ( неправильно-овальная.)
  5 5 ( бугристая.)
  6 6 ( треугольная.)
  7 7 ( неправильная.)
  8 8 ( гроздевидная.)
Ztm_11
  0 300 ( На прямом снимке наибольший линейный размер тени)
  0 10  ( менее 10 мм,)
  11 20 ( до 20 мм,)
  21 40 ( до 40 мм,)
  41 60 ( до 60 мм,)
  61 80 ( до 80 мм,)
  80 300 ( более 80 мм,)
Ztm_12
  0 300 ( наименьший линейный размер тени)
  0 10  ( до 10 мм.)
  11 20 ( более 10 мм.)
  21 40 ( более 20 мм.)
  41 60 ( более 40 мм.)
  61 80 ( более 60 мм.)
  81 300  ( более 80 мм.)
ztm11_12
{ 1 6 Ztm_11
  1 6 Ztm_12 }
 1 2 (.)
Ztm_13
  1 9   ( Отношение максимального размера к минимальному)
  1 1.3    ( порядка 1.)
  1.31 1.7 ( порядка 1,5.)
  1.71 2.5 ( порядка 2.)
  2.51 9   ( более 2.)
Ztm_14
  0 300 ( На боковом снимке линейный размер тени наибольший -)
  0 10  ( менее 10 мм,)
  11 20 ( до 20 мм,)
  21 40 ( до 40 мм,)
  41 60 ( до 60 мм,)
  61 80 ( до 80 мм,)
  80 300 ( более 80 мм,)
Ztm_15
  0 300  ( наименьший -)
  0 10  ( до 10 мм.)
  11 20 ( более 10 мм.)
  21 40 ( более 20 мм.)
  41 60 ( более 40 мм.)
  61 80 ( более 60 мм.)
  81 300  ( более 80 мм.)
Ztm_16
  1 4 ( Направление вытянутости тени -)
  1 1 ( горизонтальное.)
  2 2 ( вертикальное.)
  3 3 ( косое к корню.)
  4 4 ( косое не к корню.)
int
{ 1 1 Ztm_17
  1 1 Ztm_18
  1 1 Ztm_19
  1 1 Ztm_20 }
 1 4 ( Интенсивность тени -)
Ztm_17
  1 1 ( малая,)
Ztm_18
  1 1 ( средняя,)
Ztm_19
  1 1 ( большая,)
Ztm_20
  1 1 ( очень большая,)
int
  1 4 (.)
Cnt_1
  1 2 ( Контур нечеткий)
  1 1 ( везде.)
  2 2 ( большей частью.)
  3 3 ( Контур четкий большей частью.)
  4 4 ( Контур четкий везде.)
Cnt_2
  1 1 ( Нечеткий только в латеральной части.)
  2 2 ( Нечеткий только в медиальной части.)
Cnt_3
 (  **)
............................................................
............................................................
+(  )
Ztm_45
+(   Гипотеза врача:  ** )
Ztm_46
 (** )
                   Рис. 3.  Фрагмент программы 
                            управления синтезом текста

   Эти же правила испольтзуются для представления невербальных личностных знаний специалистов (врачей, в частности) в виде пороговых синдромных сетей. Пример одной из таких сетей дан на Рис. 4.

Sd1r1_1
{ 1 1 Ztm_18     | средней
  1 1 Ztm_19 }   | или высокой интенсивности
Sd1r1
{ 2 3 Ztm_1      | ограниченное или субтотальное затемнение
  6 7 Ztm_10     | треугольной или неправильной формы
  1 2 Sts_1      | соответствующее анатомической структуре легкого
  1 2 Sd1r1_1 }
Sd1r2_1
{ 0 0 Izm_1      | без изменения
  1 1 Um_2 }     | или с небольшим увеличением пораженного участка
Sd1r2
{ 3 4 Cnt_1      | с четкими везде или большей частью
  1 1 Bgr_1      | и ровными контурами
  1 1 Odn_1      | гомогенное
  1 1 Pfk_1      | с перифокальным воспалением
  0 0 Ztm_44     | на фоне затемнения просветы бронхов не видны
  1 2 Sd1r2_1 }
Sd1r3
{ 2 2 Odn_2      | интенсивность нарастает к периферии
  0 0 Vkl_1      | без включений
  0 0 Rsp_1      | без распада
  1 2 Ztm_29     | изменен или отсутствует
  0 0 Ztm_30     | легочн рис за пределами тени не изменен
  1 1 Stk_1 }    | связанный с корнем без дорожки
Sd1
{ 4 4 Sd1r1
  4 6 Sd1r2
  2 6 Sd1r3 }
 3 3 +(   Симптоматика указывает на возможность крупозной пневмонии,)
 3 3  ( менее вероятен центральный рак или ателектаз другой природы.)
 3 3 +(   Диагноз уточнят:)
 3 3 +(- клиническое течение и физикальные данные,)
 3 3 +(- положительный клинический и рентгенологический эффект от)
 3 3  ( антибиотикотерапии,)
 3 3 +(- бактериальная флора, обнаруженная в мокроте в диагностическом титре.)
 3 3 +(  )

   Рис. 4.  Фрагмент программы вычмсления синдрома крупозной пневмонии



   Ниже приведены варианты синтеза текста по ответам на вопросы системы "Диагностика затемнения в легком".

   Номер карты - 34 . Ф.И.О. - Идий  В.В.
   Кольцевидная тень. Тень, типичная для группы теней. Тень локализована в правом легком  в верхних отделах, зоны - кортикальная, интермедиальная, прикорневая. На боковом снимке тень расположена в отделах - средних. Форма тени неправильно-округлая. На прямом снимке наибольший линейный размер тени до 60 мм, наименьший линейный размер тени более 40 мм. Отношение максимального размера к минимальному порядка 1,5. Направление вытянутости тени - вертикальное. Интенсивность тени - средняя. Контур нечеткий большей частью. Нечеткий только в медиальной части. Контур волнистый. Тень неоднородная. Структура тени - балчатая, многокамерная. С признаками распада. Толщина кольца равномерная, наибольшая толщина кольца более 2 мм, наименьшая толщина кольца до 2 мм. Наружный контур кольца нечеткий, волнистый. Внутренний контур кольца четкий, гладкий большей частью. Граница затемнения прилежит к средостению, боковой грудной стенке, широким краем. Легочный рисунок в пределах тени отсутствует. Легочный рисунок за пределами тени изменен в непосредственной близости к тени. Изменения легочной ткани вблизи затемнения вызваны кольцевидными тенями, тяжистыми тенями в сторону корня. Наблюдается зона перифокального воспаления. Тень связана с корнем дорожкой. Дорожка гладкая, бронхиальная. Интенсивность дорожки невысокая. Диафрагма на стороне этого затемнения не видна. Диафрагма на стороне, противоположной этому затемнению, не видна.
  
   Гипотеза врача:  туберкулезный поликаверноз.
   
   Формальное заключение о характере тени:
   ``````````````````````````````````````
   Симптоматика указывает на возможность инфильтративного туберкулеза и туберкулемы в фазе распада или кавернозного туберкулеза; менее вероятны распадающийся рак, хронический абсцесс легкого, нагноившаяся киста.
   Диагноз уточнят:
- МБТ, обнаруженные в мокроте;
- гиперергическая проба Манту;
- отсутствие эффекта от неспецифической антибиотикотерапии /в т.ч. и на предыдущих этапах лечения/.
  
   Симптоматика указывает на возможность округлого инфильтрата или солитарной туберкулемы в фазе распада, менее вероятны киста, распадающийся рак, доброкачественная опухоль.
   Диагноз уточнят:
- МБТ, обнаруженные в мокроте,
- гиперергическая проба Манту,
- отсутствие эффекта от неспецифической антибиотикотерапии /в т.ч. на предыдущих этапах лечения/,
- МБТ и другие признаки туберкулеза, обнаруженные при трахеобронхоскопии визуально и исследованием бронхиального секрета и биоптата.
  
   Симптоматика указывает на наличие буллезной эмфиземы или бронхогенной кисты легкого. Менее вероятны санированная туберкулезная каверна, ограниченный спонтанный пневмоторакс, локальная эмфизема.
   Диагноз может уточнить КТ.
  
   Коллега!  У Вас появится возможность получения дополнительных рекомендаций по диагностическому поиску, если Вы ответите на пропущенные вопросы о:
  - локализации тени,
  - структуре затемнения и включениях в него,
  - межреберных промежутках,
  - взаимосвязи и положении средостения и корня по отношению к тени.



   Номер карты - 56 . Ф.И.О. - Буркин  В.М.
   Фокус. Тень единичная. Тень локализована в левом легком  в верхних отделах, зоны - интермедиальная. На боковом снимке тень расположена в отделах - средних. Форма тени неправильно-овальная. На прямом снимке наибольший линейный размер тени до 60 мм, наименьший линейный размер тени более 20 мм. Отношение максимального размера к минимальному порядка 2. На боковом снимке линейный размер тени наибольший - до 60 мм, наименьший - более 20 мм. Направление вытянутости тени - вертикальное. Интенсивность тени - малая, средняя, большая. Контур четкий большей частью. Нечеткий только в медиальной части. Контур волнистый. Тень неоднородная. На фоне затемнения определяются единичные просветления, однотипные, рассеянные, расположенные по периферии. На фоне затемнения предположительно наблюдаются включения извести, глыбки, расположенные по периферии. С подозрением на распад. Внутренний контур кольца четкий, гладкий большей частью. Граница затемнения не имеет видимой связи с диафрагмой, средостением и грудной стенкой. Легочный рисунок в пределах тени отсутствует. Легочный рисунок за пределами тени изменен в обоих легких. Изменения легочной ткани вблизи затемнения вызваны линейными тенями, тяжистыми тенями в сторону плевры, тяжистыми тенями в сторону корня, усилением легочного рисунка, деформацией легочного рисунка. Тень связана с корнем дорожкой. Дорожка гладкая, бронхиальная. Интенсивность дорожки высокая.
  
   Гипотеза врача:  туберкулема, киста, злокачественная опухоль.
   
   Формальное заключение о характере тени:
   ``````````````````````````````````````
   Симптоматика указывает на возможность инфильтративного туберкулеза и туберкулемы в фазе распада или кавернозного туберкулеза; менее вероятны распадающийся рак, хронический абсцесс легкого, нагноившаяся киста.
   Диагноз уточнят:
- МБТ, обнаруженные в мокроте;
- гиперергическая проба Манту;
- отсутствие эффекта от неспецифической антибиотикотерапии /в т.ч. и на предыдущих этапах лечения/.
  
   Симптоматика указывает на возможность злокачественной опухоли.
   Диагноз уточнят:
- цитологическое исследование мокроты,
- визуальные признаки опухоли при трахеобронхоскопии,
- наличие опухолевых клеток в бронхиальном секрете,
- морфологическое исследование биоптата, полученного при бронхоскопии, трансторакальной пункции и других инвазивных методах.
  
   Симптоматика указывает на возможность периферического рака.
   Диагноз уточнят:
- цитологическое исследование мокроты,
- визуальные признаки опухоли при трахеобронхоскопии,
- наличие опухолевых клеток в бронхиальном секрете,
- морфологическое исследование биоптата, полученного при бронхоскопии, трансторакальной пункции и других инвазивных методах.
  
   Коллега!  У Вас появится возможность получения дополнительных рекомендаций по диагностическому поиску, если Вы ответите на пропущенные вопросы о:
  - характеристиках полости, если она определяется.



   Номер карты - 61 . Ф.И.О. - Бритов А.Д.
   Фокус. Тень единичная. Тень локализована в левом легком  в верхних отделах, зоны - кортикальная, интермедиальная. На боковом снимке тень расположена в отделах - средних. Форма тени неправильно-округлая. На прямом снимке наибольший линейный размер тени до 40 мм, наименьший линейный размер тени более 20 мм. Отношение максимального размера к минимальному порядка 1. На боковом снимке линейный размер тени наибольший - до 40 мм, наименьший - более 20 мм. Интенсивность тени - средняя. Контур четкий большей частью. Нечеткий только в латеральной части. Контур волнистый. Лучистость контура только в латеральной части. Тень неоднородная. На фоне затемнения определяются единичные просветления, однотипные, рассеянные, расположенные диффузно. С подозрением на распад. Граница затемнения прилежит к боковой грудной стенке, вершиной. Легочный рисунок в пределах тени отсутствует. Легочный рисунок за пределами тени изменен в обоих легких. Изменения легочной ткани вблизи затемнения вызваны тяжистыми тенями в сторону плевры, деформацией легочного рисунка. Тень связана с корнем дорожкой. Дорожка гладкая, смешанная. Интенсивность дорожки высокая. Диафрагма на стороне этого затемнения опущена.
  
   Гипотеза врача:  периферический рак, туберкулема, доброкачественная опухоль.
   
   Формальное заключение о характере тени:
   ``````````````````````````````````````
   Симптоматика указывает на возможность инфильтративного туберкулеза и туберкулемы в фазе распада или кавернозного туберкулеза; менее вероятны распадающийся рак, хронический абсцесс легкого, нагноившаяся киста.
   Диагноз уточнят:
- МБТ, обнаруженные в мокроте;
- гиперергическая проба Манту;
- отсутствие эффекта от неспецифической антибиотикотерапии /в т.ч. и на предыдущих этапах лечения/.
  
   Симптоматика указывает на возможность злокачественной опухоли.
   Диагноз уточнят:
- цитологическое исследование мокроты,
- визуальные признаки опухоли при трахеобронхоскопии,
- наличие опухолевых клеток в бронхиальном секрете,
- морфологическое исследование биоптата, полученного при бронхоскопии, трансторакальной пункции и других инвазивных методах.
  
   Симптоматика указывает на возможность периферического рака.
   Диагноз уточнят:
- цитологическое исследование мокроты,
- визуальные признаки опухоли при трахеобронхоскопии,
- наличие опухолевых клеток в бронхиальном секрете,
- морфологическое исследование биоптата, полученного при бронхоскопии, трансторакальной пункции и других инвазивных методах.
  
   Симптоматика указывает на возможность периферического рака, менее вероятны туберкулема, очаговый туберкулез, доброкачественная опухоль.
   Диагноз уточнят:
- цитологическое исследование мокроты,
- визуальные признаки опухоли при трахеобронхоскопии,
- наличие опухолевых клеток в бронхиальном секрете,
- морфологическое исследование биоптата, полученного при бронхоскопии, трансторакальной пункции и других инвазивных методах.
  
   Симптоматика указывает на возможность туберкулемы легкого, менее вероятно наличие периферического рака, доброкачественной опухоли или ретенционной кисты.
   Диагноз могут уточнить:
- типичный для туберкулеза анамнез,
- МБТ, обнаруженные в бронхиальном секрете при катетеризации дренирующего бронха,
- трансторакальная пункция образования в легком.
  
   Коллега!  У Вас появится возможность получения дополнительных рекомендаций по диагностическому поиску, если Вы ответите на пропущенные вопросы о:
  - характеристиках полости, если она определяется.

                   ====== *** ======


